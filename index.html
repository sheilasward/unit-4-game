<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Crystal Collector's Game (with Reset)</title>
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css"> 
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- <script type="text/javascript" src="./assets/javascript/game.js"></script>   -->

</head>
<body>
    <div class="container">
        <div class="title">
            <h1>Crystals Collector!</h1>
            <div class="instructions">
                <ul>
                    <li>You will be given a random number at the start of the game.</li>
                    <li>There are four crystals below.  By clicking on a crystal, you will add a specific
                        amount of points to your total score.
                    </li>
                    <li>You win the game by matching your total score to the random number.  You lose the
                         game if your total score goes above the random number.
                    </li>
                    <li>The value of each crystal is hidden from you until you click on it.</li>
                    <li>Each time when the game starts, the game will change the value of each crystal.</li>
                </ul>
            </div>
            <br>
        </div>
        <div class="clearfix">
            <div id="randomNbr">
                <h3>Your Random Number is:</h3>
                <h2 id="rn"></h2>
            </div>
            <div id="win-lose">
                <!-- <h2>Congratulations!</h2> -->
                <!-- <h2>You won!!</h2> -->
            </div>
            <div id="score">
                <h3 id="win">Wins: &emsp; 0</h3>
                <h3 id="loss">Losses: &emsp; 0 </h3>
            </div>
        </div>

        <div class="imgGroup clearfix">
        </div>

        <div class="sum">
            <h2 id="sum">Your Current Sum is: 0 &emsp; Keep playing!</h2>
        </div>

        <button class="btnPlay">Play Again</button>

        <div class="footer">
            <h2>Copyright Â© 2018</h2>
        </div>

    </div>

    <script>
    $(document).ready(function() {
        var currSum;
        var randomNum;
        var win = 0;
        var loss = 0;
        var path = "assets/images/";
        var file = ["diamond-small.jpg", "heart-small.jpg", "spade-small.jpg", "club-small.jpg"];
        var position = [10, 100, 190, 280];

        function initialize() {
            currSum = 0;
            randomNum = Math.floor(Math.random() * 102) + 19;
            console.log("randomNum = " + randomNum);
            $("#rn").text(randomNum);
            $("#win-lose").css("visibility", "hidden");

            for (var i = 0; i < 4; i++) {
                var imageCrystal = $("<img>");
                imageCrystal.addClass("crystal");
                imageCrystal.attr("id", "image" + [i+1]);
                imageCrystal.attr("src", path + file[i]);
                imageCrystal.attr("data-crystalvalue", Math.floor(Math.random() * 12) + 1);
                imageCrystal.css("position", "absolute");
                imageCrystal.attr("height", "80px");
                imageCrystal.attr("width", "80px");
                imageCrystal.css("top", "10px");
                imageCrystal.css("left", position[i] + "px");
                $(".imgGroup").append(imageCrystal);
            }
        }
        
        initialize();
        
        $(".crystal").on("click", function() {
            var crystalValue = ($(this).attr("data-crystalvalue"));
            currSum = parseInt(currSum) + parseInt(crystalValue);
            if (currSum < randomNum) {
                $("#sum").html("Your Current Sum is: " + currSum +"&emsp; Keep playing!");
            }
            else if (currSum > randomNum) {
                $("#sum").html("Your Current Sum is: " + currSum +"&emsp; Too high - you lose.");
                loss++;
                $("#loss").html("Losses: &emsp; " + loss);  
                $("#win-lose").html("<h2>Sorry - you lost...</h2><h2>Try again.</h2>");
                $("#win-lose").css("visibility", "visible");
                $("#win-lose").fadeTo(100, 0.0, function() {
                    for (var i=0; i<5; i++) { 
                        $(this).fadeTo(100, 0.0);
                        $(this).fadeTo(500, 1.0);
                    } 
                });
            }
            else {
                $("#sum").html("Your Current Sum is: " + currSum +"&emsp; Equal - you win!!");
                win++;
                $("#win").html("Wins: &emsp; " + win);
                $("#win-lose").html("<h2>Congratulations!</h2><h2>You won!!</h2>");
                $("#win-lose").css("visibility", "visible");
                $("#win-lose").fadeTo(100, 0.0, function() {
                    for (var i=0; i<5; i++) { 
                        $(this).fadeTo(100, 0.0);
                        $(this).fadeTo(500, 1.0);
                    } 
                });
                
            }
        });
        
        $(".btnPlay").on("click", function() {
            currSum = 0;
            
            randomNum = Math.floor(Math.random() * 102) + 19;
            console.log("randomNum = " + randomNum);
            $("#rn").text(randomNum);

            $("#sum").html("Your Current Sum is: " + currSum +"&emsp; Keep playing!");
            $("#win-lose").css("visibility", "hidden");
            for (var i=0; i<4; i++) {
                $("#image" + i).attr("data-crystalvalue", Math.floor(Math.random() * 12) + 1);
            }
        });

    });



    </script>

</body>
</html>